<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0072ff">
  <meta name="description" content="Smart expense tracker PWA - Track your daily expenses offline">
  <title>SmartKharch - Expense Tracker</title>

  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="icon" href="icons/icon-192.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="container">
    <!-- Offline Indicator -->
    <div id="offlineIndicator" class="offline-indicator hidden">
      <span>ğŸ“± You're offline - Data will sync when connection returns</span>
    </div>
    <header>
      <h1 id="title">SmartKharch</h1>
      <button class="language-btn" onclick="toggleLanguage()">ğŸŒ EN</button>
    </header>

    <!-- Add Expense Card -->
    <section class="card">
      <h2 data-key="addExpense">â• Add Expense</h2>
      <div class="form-group">
        <label for="amount">Amount (à§³)</label>
        <input type="number" id="amount" placeholder="0.00" min="0" step="0.01">
      </div>
      <div class="form-group">
        <label for="category">Category</label>
        <select id="category">
          <option value="Food">ğŸ• Food</option>
          <option value="Transport">ğŸš— Transport</option>
          <option value="Shopping">ğŸ›ï¸ Shopping</option>
          <option value="Bills">ğŸ’¡ Bills</option>
          <option value="Entertainment">ğŸ¬ Entertainment</option>
          <option value="Health">ğŸ¥ Health</option>
          <option value="Education">ğŸ“š Education</option>
          <option value="Other">ğŸ“¦ Other</option>
        </select>
      </div>
      <button class="btn btn-success" onclick="addExpense()">
        <span id="addBtnText">Add Expense</span>
        <span id="addBtnSpinner" class="spinner"></span>
      </button>
    </section>

    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat">
        <div>
          <div class="stat-value" id="totalExpenses">à§³0</div>
          <div class="stat-label" data-key="monthlyExpenses">Total Expenses</div>
        </div>
        <div>ğŸ“Š</div>
      </div>
      <div class="stat">
        <div>
          <div class="stat-value" id="streak">0</div>
          <div class="stat-label">No-Spend Days</div>
        </div>
        <div>ğŸ”¥</div>
      </div>
    </div>

    <!-- Summary Chart -->
    <section class="card">
      <h2 data-key="summary">ğŸ“Š Expense Summary</h2>
      <div class="chart-container">
        <canvas id="chart"></canvas>
      </div>
    </section>

    <!-- Recent Expenses -->
    <section class="card">
      <h2 data-key="recent">ğŸ“ Recent Expenses</h2>
      <ul id="expenseList">
        <li>No expenses yet. Add your first expense above!</li>
      </ul>
    </section>

<section class="card">
  <h2 data-key="nostreak"></h2>
  <p id="streakText"></p>
</section>

    <!-- Emergency Fund -->
    <section class="card">
      <h2 data-key="emergency">ğŸ›¡ï¸ Emergency Fund</h2>
      <div class="progress-container">
        <div class="bar">
          <div id="progress"></div>
        </div>
        <p id="emText">Build Emergency Fund</p>
      </div>
    </section>

    <!-- Tips -->
    <section class="card">
      <h2 data-key="tips">ğŸ’¡ Smart Tips</h2>
      <ul id="tips">
        <li>Welcome to SmartKharch! Start tracking your expenses to get personalized tips.</li>
      </ul>
      <div class="data-buttons">
        <button class="btn data-btn" onclick="exportData()">ğŸ“¤ Export Data</button>
        <button class="btn data-btn" onclick="importData()">ğŸ“¥ Import Data</button>
        <input type="file" id="importFile" accept=".json" style="display: none;" onchange="handleImport(event)">
      </div>
    </section>
  </div>

  <!-- PWA Install Prompt -->
  <div id="installPrompt" class="install-prompt hidden">
    <p>ğŸ“± Install SmartKharch for the best experience!</p>
    <button id="installBtn" class="btn install-btn">Install App</button>
    <button id="dismissBtn" class="btn dismiss-btn">Maybe Later</button>
  </div>

  <script src="lang.js"></script>
  <script src="app.js"></script>
</body>
</html>
